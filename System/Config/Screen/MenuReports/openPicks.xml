<?xml version="1.0"?>
<!--
   - Filename:     openPicks.xml
   - Description:
   -
   - (c) COPYRIGHT QC Software, LLC 2018 All Rights Reserved
   - No part of this copyrighted work may be reproduced, modified, or
   - distributed in any form or by any means without the prior written
   - permission of QC Software, LLC.
   -
   - $Id: openPicks.xml 10242 2018-06-06 19:46:47Z wlw $
   - Notes:
  -->
<FLEXSCREEN title = "Open Picks" 
            height = "600" 
            width = "1400" 
            frametype = "internal"
            report = "false"
            updateSecurity = "openPicks.edit" 
            insertSecurity = "openPicks.edit"
            deleteSecurity = "openPicks.edit" >

  <!-- a dbConnect here is a universal connect object  -->
  <DBCONNECT type = "predefined" 
             connectionId = "default" 
             setglobal = "true"/>

  <GLOBAL_DEFINITIONS>
    <VECTORMAP name = "woStatuses"
               loadSql = "select idx,
                                 returnCodeMsg
                            from MnemonicCodesView
                            where mnemonicType = 'WORK_ORDER_STATUSES'
                            order by idx" />
                            
   <VECTORMAP name = "moveableUnitStatuses"
               loadSql = "select idx,
                                 returnCodeMsg
                            from MnemonicCodesView
                            where mnemonicType = 'MOVEABLE_UNIT_STATUSES'
                            order by idx" />
  </GLOBAL_DEFINITIONS>

  <REPORTS preview = "true" records = "1000">
  </REPORTS>

  <SPLITPANE divider = "200" 
             orientation = "vertical" >
    <FLEXTABLECOMPONENT name = "openPickTableTotals" 
                        init = "openPickTableTotalsInit" 
                        refresh = "true" 
                        greenbar = "true"
                        records = "1000"
                        ignoreEventConcatenation = "true">

      <DBCONNECT type = "global" />

      <TABLE key = "openPickTableTotalsInit"
    	     title = "Open Picks Totals By Day" >
        <SELECT sql =  "call OpenPicksTotals()" />
                       
        <TABLECOLUMNS>
          <TABLECOLUMN name = "ShipDate"
                       align = "center" />
	      <TABLECOLUMN name = "WorkOrderId"  
	                   align = "right" />
	      <TABLECOLUMN name = "Unit"  
	                   align = "right" />
	      <TABLECOLUMN name = "Qty"  
	                   align = "right" />
	      <TABLECOLUMN name = "LocationId"  
	                   align = "right" />
	      <TABLECOLUMN name = "MoveableUnitId"  
	                   align = "right" />
        </TABLECOLUMNS>          

      </TABLE>
    </FLEXTABLECOMPONENT>    

    <FLEXTABLECOMPONENT name = "openPickTableDetails" 
                        refresh = "true" 
                        greenbar = "true"
                        records = "1000"
                        ignoreEventConcatenation = "true">

      <DBCONNECT type = "global" />

      <TRIGGER name = "openPickTableTotals"/>
      <TABLE key = "openPickTableTotals:openPickTableTotalsInit"
    	     title = "Open Picks Details" >      
        <SELECT sql = "call OpenPicksDetails(/*ShipDate)" />
                           
        <TABLECOLUMNS>
          <TABLECOLUMN name = "WaveNo"  
                       hide = "true" />
          <TABLECOLUMN name = "ReceivedTs"
                       hide = "true" />
          <TABLECOLUMN name = "WorkOrderId"
                         preferredWidth = "30" />
          <TABLECOLUMN name = "WoStatus"
                         preferredWidth = "50" />
          <TABLECOLUMN name = "ShipDate"
                       align = "center" />
          <TABLECOLUMN name = "Unit"
                         preferredWidth = "30" />
          <TABLECOLUMN name = "UnitType"
                         preferredWidth = "30" />
          <TABLECOLUMN name = "Description"  
                         preferredWidth = "200" />
          <TABLECOLUMN name = "Qty"  
                         preferredWidth = "20"
                       align = "right" />
          <TABLECOLUMN name = "ZoneId"
                         preferredWidth = "100" />
          <TABLECOLUMN name = "Cart"  
                       hide = "true" />
          <TABLECOLUMN name = "OperId"  
                         hide = "true" />
          <TABLECOLUMN name = "LocationId"
                         preferredWidth = "30" />
          <TABLECOLUMN name = "MoveableUnitId"
                         preferredWidth = "30" />
          <TABLECOLUMN name = "MuStatus"
                         preferredWidth = "60" />
        </TABLECOLUMNS>          
        
        <ALTVALUES>
         <FIELD name = "WoStatus" 
                 ifdef = "woStatuses" />
         <FIELD name = "MuStatus" 
                 ifdef = "moveableUnitStatuses" />
        </ALTVALUES>
      </TABLE>
    </FLEXTABLECOMPONENT>      
  </SPLITPANE> 
</FLEXSCREEN>
