<!--
 - Filename:     inventoryMaintTabDiscrepantInventory.xml
 - Description:
 -
 - (c) COPYRIGHT Queen City Software, Inc. 2018 All Rights Reserved
 - No part of this copyrighted work may be reproduced, modified, or
 - distributed in any form or by any means without the prior written
 - permission of Queen City Software, Inc.
 -
 - $Id: inventoryMaintTabDiscrepantInventory.xml 9953 2018-03-27 19:48:38Z rlh $
 - Notes:
-->
<inventoryMaintTabDiscrepantInventory>
    <TAB title= "Discrepant Inventory">
      <SPLITPANE divider="160">
        <FLEXSQLMODIFIERCOMPONENT
          name="DiscrepantFilter"
          appendAsAnd="false"
          makeAbsolute="true"
          autoResize="false"
          autoExecute="true"
          labelsOnTop="true"
          maxFilterRows="5"
          editorWidth="130"
          showCheckBoxes="false"
          filterBorderText="Filter Criteria"
          filterBorderColor="blue"
          okButtonText="Execute"
          passiveMode="false"
          orientation="vertical">

          <DBCONNECT
            type="global"
            connectionId="epicor" />

          <FILTER_OPTION
            label="Unit"
            editorType="text"
            autoQuote="true" />

          <FILTER_OPTION
            label="MasterZoneId"
            editorType="combo"
            autoQuote="true">
            <COMBO_OPTIONS
              ifdef="masterZoneIds"
              loadEmptyItem="false" />
          </FILTER_OPTION>

          <FILTER_OPTION
            label="ZoneId"
            editorType="text"
            autoQuote="true">
          </FILTER_OPTION>

          <FILTER_OPTION
            label="LocationId"
            editorType="text"
            autoQuote="true" />

          <FILTER_OPTION
            label="StorageId"
            editorType="text"
            autoQuote="true" />

        </FLEXSQLMODIFIERCOMPONENT>

        <FLEXTABLECOMPONENT name = "DiscrepantInventoryTable" 
                            init = "init" 
                            records = "500"
                            greenbar = "true"
                            refresh = "true"
                            refreshOnUpdate = "true"
                            refreshOnInsert = "true"
                            ignoreEventConcatenation = "true">
  
          <DBCONNECT type = "global" />
          <TRIGGER name = "DiscrepantFilter" />
  
          <TABLE key = "DiscrepantFilter:execute"
                 title = "Discrepant Inventory">
            <SELECT sql="call InventoryDiscrepant(//Unit, 
                                                  //MasterZoneId, 
                                                  //ZoneId, 
                                                  //LocationId, 
                                                  //StorageId)" />
  
            <ALTVALUES>
              <FIELD name = "Status"
                     ifdef="inventoryStatusesMap" />
            </ALTVALUES>
                
            <TABLECOLUMNS>
              <TABLECOLUMN
                name="UnitType"
                hide="true" />

              <TABLECOLUMN
                name="Lot"
                hide="true" />

              <TABLECOLUMN
                name="Description"
                preferredWidth="180" />

              <TABLECOLUMN
                name="ZoneId"
                preferredWidth="150" />

              <TABLECOLUMN
                name="StorageId"
                preferredWidth="80" />

              <TABLECOLUMN
                name="LocationId"
                preferredWidth="80" />

              <TABLECOLUMN
                name="Qty"
                preferredWidth="50"
                maxWidth="60"
                align="right" />

              <TABLECOLUMN
                name="PerishTs"
                minWidth="80"
                maxWidth="80"
                align="center" />

              <TABLECOLUMN
                name="ReceivedTs"
                minWidth="80"
                maxWidth="80"
                align="center" />
            </TABLECOLUMNS>

          </TABLE>
        </FLEXTABLECOMPONENT>
      </SPLITPANE>
    </TAB>
</inventoryMaintTabDiscrepantInventory>
